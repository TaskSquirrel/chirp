(this["webpackJsonpchirp-ui"]=this["webpackJsonpchirp-ui"]||[]).push([[0],{32:function(e,t,n){e.exports=n(62)},37:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),u=n.n(c),o=(n(37),n(4)),l=n(1),i=r.a.createContext({token:null,setToken:function(){return null}}),s=function(e){var t=e.children,n=localStorage.getItem("token"),c=Object(a.useState)(n||null),u=Object(l.a)(c,2),o=u[0],s=u[1],p={token:o,setToken:s};return Object(a.useEffect)((function(){o?localStorage.setItem("token",o):localStorage.removeItem("token")}),[o]),r.a.createElement(i.Provider,{value:p},t)},p=n(3),m=n.n(p),f=n(7),b=n(9),d=r.a.createContext({done:!1,authenticated:!1,invalidate:function(){}}),v=function(e){var t=e.children,n=Object(a.useState)(!1),c=Object(l.a)(n,2),u=c[0],o=c[1],s=Object(a.useState)(!1),p=Object(l.a)(s,2),v=p[0],h=p[1],O=Object(a.useContext)(i),j=O.token,E=O.setToken,g={done:u,authenticated:v,invalidate:function(){h(!1),E(null)}};return Object(a.useEffect)((function(){v||function(){var e=Object(f.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!j){e.next=7;break}return e.next=4,Object(b.a)("/user",{headers:{Authorization:"Bearer ".concat(j)}});case 4:t=e.sent,n=t.data.status,h("OK"===n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),h(!1);case 12:return e.prev=12,o(!0),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}}()()}),[v,j]),r.a.createElement(d.Provider,{value:g},t)},h=n(11),O=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Not found!"))},j=function(e){var t=e.routes;return r.a.createElement(h.d,null,t.map((function(e){var t,n=e.to,a=e.exact,c=e.component,u=e.render;return t=c?function(){return r.a.createElement(c,null)}:u||function(){return null},r.a.createElement(h.b,{key:n,path:n,exact:a,render:t})})),r.a.createElement(h.b,{component:O}))},E=function(){return r.a.createElement("div",null,"Loading...")},g=function(){return{token:Object(a.useContext)(i).token,user:Object(a.useContext)(d)}},w=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),i=Object(l.a)(u,2),s=i[0],p=i[1],d=Object(a.useState)(null),v=Object(l.a)(d,2),h=v[0],O=v[1],j=g().token,E=function(){var e=Object(f.a)(m.a.mark((function e(){var t,n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=3;break}return c(!0),e.abrupt("return");case 3:return e.prev=3,e.next=6,Object(b.a)("/additem",{method:"POST",headers:{Authorization:"Bearer ".concat(j)},data:{content:s}});case 6:t=e.sent,n=t.data,a=n.status,r=n.id,"OK"===a&&O(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),c(!0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s?E():c(!0)}},r.a.createElement("h1",null,"New tweet"),h&&r.a.createElement("div",null,r.a.createElement(o.b,{to:"/tweet/".concat(h)},"View new tweet")),n&&r.a.createElement("div",null,"Some error ocurred!"),r.a.createElement("textarea",{placeholder:"What's going on?",value:s,onChange:function(e){c(!1),p(e.target.value)}}),r.a.createElement("button",{type:"submit"},"Tweet"),r.a.createElement(o.b,{to:"/search"},"Search tweets"),r.a.createElement(o.b,{to:"/signout"},"Sign out"))},y=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(!1),i=Object(l.a)(u,2),s=i[0],p=i[1],d=Object(a.useState)(""),v=Object(l.a)(d,2),h=v[0],O=v[1],j=Object(a.useState)(""),E=Object(l.a)(j,2),g=E[0],w=E[1],y=Object(a.useState)(""),S=Object(l.a)(y,2),x=S[0],k=S[1],C=Object(a.useState)(""),P=Object(l.a)(C,2),T=P[0],D=P[1],K=function(){var e=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&g&&x&&T){e.next=3;break}return p(!0),e.abrupt("return");case 3:if(x===T){e.next=6;break}return p(!0),e.abrupt("return");case 6:return e.prev=6,e.next=9,Object(b.a)("/adduser",{method:"POST",data:{username:h,email:g,password:x}});case 9:t=e.sent,"OK"===t.data.status&&c(!0),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),p(!0);case 18:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}(),q=function(e){return function(t){e(t.target.value)}};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),K()}},s&&r.a.createElement("div",null,"Please check your information!"),n&&r.a.createElement("div",null,r.a.createElement("span",null,"Good news! You've signed up. Just verify your email and you're all set!"),r.a.createElement(o.b,{to:"/code"},"Verify here.")),r.a.createElement("input",{type:"text",placeholder:"Username",value:h,onChange:q(O)}),r.a.createElement("input",{type:"email",placeholder:"Email",value:g,onChange:q(w)}),r.a.createElement("input",{type:"password",placeholder:"Password",value:x,onChange:q(k)}),r.a.createElement("input",{type:"password",placeholder:"Password again",value:T,onChange:q(D)}),r.a.createElement("button",null,"Sign up"))},S=function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=(t[0],t[1]),c=Object(a.useState)(!1),u=Object(l.a)(c,2),o=(u[0],u[1]),s=Object(a.useState)(),p=Object(l.a)(s,2),d=(p[0],p[1]),v=Object(a.useState)(""),h=Object(l.a)(v,2),O=h[0],j=h[1],E=Object(a.useState)(""),g=Object(l.a)(E,2),w=g[0],y=g[1],S=Object(a.useContext)(i).setToken,x=function(){var e=Object(f.a)(m.a.mark((function e(){var t,a,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.a)("/login",{method:"POST",params:{token:!0},data:{username:O,password:w}});case 3:t=e.sent,a=t.data,r=a.status,c=a.token,"OK"===r&&c?S(c):n("Failed to login!"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n("Failed!");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),k=function(e,t){return function(n){e(n.target.value),t(!1)}};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=!0;O.length<1&&(t=!1,o(!0)),w.length<1&&(t=!1,d(!0)),t&&x()}},r.a.createElement("input",{type:"text",value:O,onChange:k(j,o)}),r.a.createElement("input",{type:"password",value:w,onChange:k(y,d)}),r.a.createElement("button",{type:"submit"},"Sign in"))},x=function(){return(0,g().user.invalidate)(),r.a.createElement(h.a,{to:"/signin"})},k=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(!1),i=Object(l.a)(u,2),s=i[0],p=i[1],d=Object(a.useState)(""),v=Object(l.a)(d,2),h=v[0],O=v[1],j=Object(a.useState)(""),E=Object(l.a)(j,2),g=E[0],w=E[1],y=function(){var e=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.a)("/verify",{method:"POST",data:{email:h,key:g}});case 3:t=e.sent,"OK"===t.data.status&&p(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c(!0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),y()}},n&&r.a.createElement("div",null,"Credentials incorrect!"),s&&r.a.createElement("div",null,r.a.createElement("span",null,"You've been verified!"),r.a.createElement(o.b,{to:"/signin"},"Sign in!")),r.a.createElement("input",{required:!0,type:"email",placeholder:"Email",value:h,onChange:function(e){O(e.target.value)}}),r.a.createElement("input",{required:!0,type:"text",placeholder:"Verification code",value:g,onChange:function(e){w(e.target.value)}}),r.a.createElement("button",{type:"submit"},"Verify"))},C=function(e){var t=e.children,n=e.loading,a=e.not,c=e.redirectTo,u=g().user,o=u.done,l=u.authenticated;return o?(a?o&&!l:o&&l)?r.a.createElement(r.a.Fragment,null,t):r.a.createElement(h.a,{to:c}):r.a.createElement(r.a.Fragment,null,n||null)},P=function(e,t){return function(n){var a=t||"/",c=function(t){return r.a.createElement(C,{not:e,redirectTo:a},r.a.createElement(n,t))},u=n.name||n.displayName||"Component";return c.displayName="requireAuthentication(".concat(u,")"),c}},T=[{to:"/",exact:!0,component:function(){var e=g().user,t=e.done,n=e.authenticated;return t&&n?r.a.createElement(w,null):t&&!n?r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome to Chirp!"),r.a.createElement("div",null,r.a.createElement(o.b,{to:"/signin"},"Returning? Sign in.")),r.a.createElement("div",null,r.a.createElement(o.b,{to:"/signup"},"Create an account for free!"))):r.a.createElement(E,null)}},{to:"/signin",exact:!0,component:P(!0)(S)},{to:"/signup",exact:!0,component:P(!0)(y)},{to:"/signout",exact:!0,component:P()(x)},{to:"/code",exact:!0,component:P(!0)(k)},{to:"/tweet/:id",exact:!0,component:r.a.lazy((function(){return n.e(4).then(n.bind(null,63))}))},{to:"/search",exact:!0,component:r.a.lazy((function(){return n.e(3).then(n.bind(null,64))}))},{to:"/not-found",exact:!0,component:O}],D=(n(61),function(){return r.a.createElement(o.a,null,r.a.createElement(s,null,r.a.createElement(v,null,r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(E,null)},r.a.createElement(j,{routes:T})))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(3),r=n.n(a),c=n(28),u=n(7),o=n(29),l=n.n(o);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,c,u,o=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},a=o.length>2?o[2]:void 0,c="localhost:6969",u=a?"https":"http",e.abrupt("return",l.a.request(s({url:"".concat(u,"://").concat(c).concat(t)},n)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},[[32,1,2]]]);
//# sourceMappingURL=main.fa961f9e.chunk.js.map